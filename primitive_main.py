from fastmcp import FastMCP
from typing import List, Optional
import random
import logging

# ë¡œê¹… ì„¤ì •
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# MCP ì„œë²„ ìƒì„±
mcp = FastMCP("PrimitiveNameGenerator")

# ì›ì‹œì¸ ë¶€ì¡± ì´ë¦„ë“¤
TRIBE_NAMES = [
    "ìš°ê°€ì¡±", "ê·¸ë¥´ì¡±", "ë­‰ê°€ì¡±", "ëŒë¡ì¡±", "ë¶ˆê½ƒì¡±", "ë§˜ëª¨ìŠ¤ì¡±",
    "ë™êµ´ì¡±", "ë°”ìœ„ì¡±", "ë‚˜ë¬´ì¡±", "ê°•ë¬¼ì¡±", "ì¬ë”ì¡±", "ì™€ìš°ì¡±"
]

# ì›ì‹œì¸ ì§ì±…/ì—­í• 
PRIMITIVE_ROLES = [
    "ì¡±ì¥", "ì‚¬ëƒ¥ê¾¼", "ì£¼ìˆ ì‚¬", "ì „ì‚¬", "ìˆ˜ì§‘ê°€", "ë¶ˆì§€ê¸°", 
    "ë™êµ´ì§€í‚´ì´", "ë§˜ëª¨ìŠ¤ì¡ì´", "ëŒë„ë¼ì¥ì¸", "ì—´ë§¤ë”°ê¸°ëŒ€ì¥"
]

# í‚¤ì›Œë“œë³„ ì›ì‹œì¸ ì´ë¦„ ìš”ì†Œë“¤
KEYWORD_ELEMENTS = {
    # ë¶ˆ/ì—´ ê´€ë ¨
    "fire": ["ë¶ˆê½ƒ", "íƒ€ì˜¤", "í™œí™œ", "ì§€ì§€ì§", "í›„í›„", "íƒ€ë‹¥", "ì´ê¸€ì´ê¸€", "í™œí™œì´", "ë¶ˆí‹°"],
    "hot": ["ëœ¨ê±°", "í›„ëˆ", "ë‹¬ê¶ˆ", "ëœ¨ë”", "í™œí™œ", "ë”°ëˆ", "í›„í›„", "í˜¸í˜¸", "ëœ¨ê±°ëœ¨ê±°"],
    
    # ì‚¬ëƒ¥/ì „íˆ¬ ê´€ë ¨  
    "hunt": ["ì‚¬ëƒ¥", "ì°½ì§ˆ", "ëŒë©", "ìœ¼ì•…", "ê·¸ë¥´ë¦‰", "ìœ¼ë¥´ë ", "íœ˜ë‘˜", "ì°ì°", "ì¿¡ì¿¡"],
    "strong": ["ì¿µì¾…", "ë°”ìœ„", "ëŒì£¼ë¨¹", "ìœ¼ëì°¨", "í˜ì„¼", "ìŒ˜ìŒ˜", "ë­‰ì¹˜", "ê½ˆë‹¹", "ì¾…ì¾…"],
    "brave": ["ìš©ê°", "ë¬´ì„œì›Œ", "ìœ¼ë¥´ë¦‰", "êº„ë¥´ë¥´", "ìœ„í—˜í•´", "ê²ì—†", "ëŒ€ë‹´", "ìš©ë§¹", "ì”©ì”©"],
    
    # ë™ë¬¼ ê´€ë ¨
    "mammoth": ["ë§˜ëª¨ìŠ¤", "ê±°ëŒ€ì½”ë¼ë¦¬", "í„¸ë¶ìˆ­", "ì—„ì²­í°", "ìœ¼ë¦¬ìœ¼ë¦¬", "ëš±ëš±", "ì½”ê¸¸", "ì–´ë§ˆì–´ë§ˆ", "í¬ìœ¼ìœ¼"],
    "bear": ["ê³°ëŒ", "í„¸ë³µìˆ­", "ê¿€ë¨¹", "ê²¨ìš¸ì ", "ìœ¼ë¥´ë¦‰", "í¬ê·¼", "ëª¨ì¡°ë¦¬", "í„¸í„¸", "êº¼ëŒ"],
    "tiger": ["í˜¸ë‘", "ì¤„ë¬´ëŠ¬", "ìœ¼ë¥´ë¥´", "ë‚ ì¹´ë¡œ", "ë¬´ì„œìš´", "ì–´í¥", "í• í„", "ì¨˜ì¨˜", "ì•¼ì˜¹"],
    "eagle": ["ë…ìˆ˜ë¦¬", "ë‚ ê°œ", "íŒŒë‹¥íŒŒë‹¥", "í•˜ëŠ˜", "ë‚šì•„ì±”", "íœ˜ì´ì´", "ë†’ì´ë†’ì´", "í›„ë‘‘", "êº„ì•„ì•…"],
    
    # ìì—° ê´€ë ¨
    "cave": ["ë™êµ´", "ê¹Šìˆ™", "ì–´ë‘ì»´ì»´", "í›„ë‘‘", "ìˆ¨ìˆ¨", "êµ¬ë©", "ëœ¨ì•…ëœ¨ì•…", "ë“¤ì–´ê°€", "ë°–ìœ¼ë¡œ"],
    "rock": ["ë°”ìœ„", "ëŒë©©", "ë”±ë”±", "ì¿µì¿µ", "ë‹¨ë‹¨", "ë¬´ê±°ì›Œ", "êµ´ëŸ¬", "ìŒ“ìŒ“", "ëŒëŒ"],
    "tree": ["ë‚˜ë¬´", "ìì‚¬ê·€", "ì—´ë§¤", "ê·¸ëŠ˜", "ì˜¬ë¼ê°€", "í”ë“¤í”ë“¤", "ìš°ìˆ˜ìˆ˜", "ì‹¹ì‹¹", "ì´ˆë¡ì´ˆë¡"],
    "water": ["ë¬¼", "ì²¨ë²™", "ì‹œì›", "ë§ˆì‹œë§ˆì‹œ", "ì² ë²…", "ì¡¸ì¡¸", "ì‹œëƒ‡ë¬¼", "ë§‘ì€ë§‘ì€", "ì°¨ê°€ì›Œ"],
    "wind": ["ë°”ëŒ", "íœ˜ì´ì´", "ì‹œì›ì‹œì›", "íœ˜ìµ", "ì†¨ì•„ì•„", "ë¶ˆì–´ë¶ˆì–´", "ë‚ ë ¤", "íœ˜ë‚ ", "í›„í›„"],
    
    # ìŒì‹ ê´€ë ¨
    "fruit": ["ì—´ë§¤", "ë‹¬ì½¤", "ë§›ë‚˜", "ëƒ ëƒ ", "ìª½ìª½", "ë”°ë¨¹", "ë¹¨ê°„ë¹¨ê°„", "ë‹¨ë‹¨", "í†¡í†¡"],
    "meat": ["ê³ ê¸°", "ì”¹ì ì”¹ì ", "ë§›ë‚˜ë§›ë‚˜", "ëƒ ëƒ ", "êµ¬ì›Œêµ¬ì›Œ", "ì§­ì§­", "ì«„ê¹ƒì«„ê¹ƒ", "ê¸°ë¦„ì§„", "í–¥ê¸‹"],
    "fish": ["ë¬¼ê³ ê¸°", "í„ë–¡í„ë–¡", "ì¡ì•˜ë‹¤", "ë¯¸ë„ëŸ¬ì ¸", "ë²ˆì©ë²ˆì©", "ì‹±ì‹±", "ì°°ë‘ì°°ë‘", "íŠ€ê¹€íŠ€ê¹€", "ë°”ë‹¤"],
    
    # ë„êµ¬ ê´€ë ¨
    "stone": ["ëŒ", "ê¹ì•„ê¹ì•„", "ë‚ ì¹´ë¡œ", "ë˜ì ¸", "ë§í˜€", "ë”±ë”±", "ë¾°ì¡±ë¾°ì¡±", "ê°ˆì•„ê°ˆì•„", "ìª¼ê°œ"],
    "stick": ["ë‚˜ë¬´ë§‰ëŒ€", "ê¸¸ì­‰", "íœ˜ë‘˜", "ì°Œë¥´", "íœ˜ìµ", "ë‹¨ë‹¨", "ê³§ì€ê³§ì€", "ì¡ì•„", "ë‘ë“œë ¤"],
    "club": ["ëª½ë‘¥ì´", "íœ˜ë‘˜", "ê½ˆë‹¹", "ë•Œë ¤", "ë¬´ê±°ì›Œ", "ì¿µì¾…", "í›„ë ¤", "ë‹¨ë‹¨", "ë­‰íˆ­"],
    
    # ê°ì • ê´€ë ¨
    "happy": ["ê¸°ë»", "ì¢‹ì•„ì¢‹ì•„", "ì›ƒìŒ", "ê¹”ê¹”", "ì‹ ë‚˜", "ë°©ê¸‹", "í—¤í—¤", "ì™€í•˜í•˜", "ì¦ê±°ì›Œ"],
    "angry": ["í™”ë‚˜", "ìœ¼ì•…", "ì„±ë‚´", "ë¶€ê¸€ë¶€ê¸€", "ì½§ê¹€", "í„í„", "ìœ¼ë¥´ë¦‰", "ë…¸ë°œëŒ€ë°œ", "ë¶€ì•„ì•…"],
    "funny": ["ì›ƒê²¨", "ì¬ë°Œì–´", "í‚¥í‚¥", "ìš°ìŠ¤", "ê»„ê»„", "ê¹”ê¹”", "í˜¸í˜¸", "ë°°ê¼½", "ìš°ìŠ¤ê½"],
    "sleepy": ["ì¡¸ë ¤", "ê¾¸ë²…ê¾¸ë²…", "ì ì™€", "ìƒˆê·¼ìƒˆê·¼", "ì¿¨ì¿¨", "ë“œë¥´ë ", "ëˆˆê°", "í¬ê·¼", "ëŠ˜ì–´ì ¸"],
    
    # ë‚ ì”¨ ê´€ë ¨
    "rain": ["ë¹„", "í›„ë‘ë‘‘", "ì´‰ì´‰", "ì –ì–´", "ìš°ì‚°", "í›„ë“œë“", "ì°°ë‘ì°°ë‘", "ì‹œì›", "í†¡í†¡"],
    "sun": ["í•´", "ë”°ëœ»", "ë°ì€ë°ì€", "ë°˜ì§", "ëœ¨ê±°ëœ¨ê±°", "ëˆˆë¶€ì…”", "ì¨ì¨", "í™˜í•œ", "ë¹›ë‚˜"],
    "cold": ["ì¶”ì›Œ", "ë¶€ë¥´ë¥´", "ë–¨ì–´", "ì–¼ìŒ", "ê½ê½", "ì‹œë ¤", "ì˜¤ë“¤ì˜¤ë“¤", "ì°¨ê°€ì›Œ", "í›„ë“¤í›„ë“¤"],
    "snow": ["ëˆˆ", "í•˜ì–€í•˜ì–€", "í¬ê·¼", "í„í„", "ë™ê¸€ë™ê¸€", "ë¯¸ë„ëŸ¬ì ¸", "ì°¨ê°€ì›Œ", "í­ì‹ í­ì‹ ", "ëˆˆì‚¬ëŒ"],
    
    # ìƒ‰ê¹” ê´€ë ¨
    "red": ["ë¹¨ê°„ë¹¨ê°„", "ìƒˆë¹¨ê°„", "í† ë§ˆí† ", "ë”¸ê¸°", "í”¼", "ë¶ˆ", "ë£¨ë¹„", "ì¥ë¯¸", "ë¹¨ê°€ë©´"],
    "blue": ["íŒŒë€íŒŒë€", "í•˜ëŠ˜", "ë°”ë‹¤", "ì‹œì›", "ê¹Šì€ê¹Šì€", "ë§‘ì€", "ì‹œëƒ‡ë¬¼", "íŒŒë‘ìƒˆ", "êµ¬ìŠ¬"],
    "green": ["ì´ˆë¡ì´ˆë¡", "ë‚˜ë­‡ì", "í’€í’€", "ì‹±ê·¸", "ìì—°", "ìˆ²", "ìƒˆì‹¹", "ê°œêµ¬ë¦¬", "ì—ë©”ë„ë“œ"],
    "yellow": ["ë…¸ë€ë…¸ë€", "í•´", "ë°”ë‚˜ë‚˜", "ë³‘ì•„ë¦¬", "ë°ì€", "ë°˜ì§", "ê¸ˆê¸ˆ", "ë ˆëª¬", "ê½ƒì"],
    "black": ["ê²€ì€ê²€ì€", "ê¹Œë§Œ", "ë°¤", "ì–´ë‘ ", "ê¹œê¹œ", "ìˆ¯", "ê·¸ë¦¼ì", "ê³°", "ê¹Œë§ˆê·€"],
    "white": ["í•˜ì–€í•˜ì–€", "ìƒˆí•˜ì–€", "ëˆˆ", "êµ¬ë¦„", "ê¹¨ë—", "ìˆœìˆ˜", "ë©´", "í† ë¼", "ìš°ìœ "]
}

@mcp.tool
def generate_primitive_name(
    keywords: List[str],
    style: Optional[str] = "caveman",
    gender: Optional[str] = "any", 
    count: Optional[int] = 3
) -> dict:
    """
    í‚¤ì›Œë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¬ë¯¸ìˆëŠ” ì›ì‹œì¸ ì´ë¦„ì„ ìƒì„±í•©ë‹ˆë‹¤.
    
    Args:
        keywords: ì´ë¦„ì— ë°˜ì˜í•  í‚¤ì›Œë“œë“¤ (ì˜ˆ: ["fire", "strong", "mammoth"])
        style: ì´ë¦„ ìŠ¤íƒ€ì¼ ("caveman", "shaman", "hunter", "chief", "funny")
        gender: ì„±ë³„ ("male", "female", "any")
        count: ìƒì„±í•  ì´ë¦„ ê°œìˆ˜ (1-10)
        
    Returns:
        dict: ìƒì„±ëœ ì´ë¦„ë“¤ê³¼ ì˜ë¯¸ ì„¤ëª…
    """
    logger.info(f"ì›ì‹œì¸ ì´ë¦„ ìƒì„± ìš”ì²­: {keywords}, ìŠ¤íƒ€ì¼: {style}, ê°œìˆ˜: {count}")
    
    if count > 10:
        count = 10
    elif count < 1:
        count = 1
        
    generated_names = []
    
    for _ in range(count):
        # í‚¤ì›Œë“œì—ì„œ ì´ë¦„ ìš”ì†Œ ì¶”ì¶œ
        name_elements = []
        for keyword in keywords:
            if keyword.lower() in KEYWORD_ELEMENTS:
                name_elements.extend(KEYWORD_ELEMENTS[keyword.lower()])
        
        # í‚¤ì›Œë“œ ë§¤ì¹­ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ìš”ì†Œ ì‚¬ìš©
        if not name_elements:
            default_elements = ["ìš°ê°€", "ê·¸ë¥´", "ë­‰ê°€", "ëŒë¡", "ì¿µì¾…", "ìœ¼ì•…", "ì™€ìš°", "í˜¸í˜¸"]
            name_elements = default_elements
        
        # ë¶€ì¡± ì´ë¦„ ì„ íƒ
        tribe = random.choice(TRIBE_NAMES)
        
        # ìŠ¤íƒ€ì¼ì— ë”°ë¥¸ ì´ë¦„ êµ¬ì„±
        if style == "caveman":
            # ë™êµ´ì¸ ìŠ¤íƒ€ì¼: ìš°ê°€-[ìš”ì†Œ]-ì´
            element = random.choice(name_elements)
            suffix = random.choice(["ì´", "ëŒì´", "ìˆœì´", "ê°‘ì´", "ì² ì´", "ì‡ ", "ë°”ìš°", "ëŒ"])
            full_name = f"ìš°ê°€-{element}-{suffix}"
            role = "ë™êµ´ê±°ì£¼ì"
            
        elif style == "shaman":
            # ì£¼ìˆ ì‚¬ ìŠ¤íƒ€ì¼: [ìš”ì†Œ]-[ì‹ ë¹„ë¡œìš´ì ‘ë¯¸ì‚¬]
            element = random.choice(name_elements)
            mystic_suffix = random.choice(["ì˜ˆì–¸ì", "ë°”ëŒì†ì‚­ì„", "ì˜í˜¼ëŒ€í™”", "ê¿ˆí•´ì„", "ë³„ë³´ê¸°", "ì‹ ë‚´ë¦¼"])
            full_name = f"{element}-{mystic_suffix}"
            role = "ë¶€ì¡± ì£¼ìˆ ì‚¬"
            
        elif style == "hunter":
            # ì‚¬ëƒ¥ê¾¼ ìŠ¤íƒ€ì¼: [ìš”ì†Œ]-ì‚¬ëƒ¥ê¾¼/ì¡ì´
            element = random.choice(name_elements)
            hunter_suffix = random.choice(["ì‚¬ëƒ¥ê¾¼", "ì¡ì´", "ì¶”ì ì", "ì°½ë˜ì§€ê¸°", "í™œì˜ê¸°", "ë«ë†“ê¸°"])
            full_name = f"{element}-{hunter_suffix}"
            role = "ë¶€ì¡± ì‚¬ëƒ¥ê¾¼"
            
        elif style == "chief":
            # ì¡±ì¥ ìŠ¤íƒ€ì¼: ìœ„ëŒ€í•œ-[ìš”ì†Œ]-ëŒ€ì¥/ì¡±ì¥
            element = random.choice(name_elements)
            chief_prefix = random.choice(["ìœ„ëŒ€í•œ", "ê°•í•œ", "í˜„ëª…í•œ", "ìš©ê°í•œ", "ê±°ëŒ€í•œ", "ë¬´ì„œìš´"])
            chief_suffix = random.choice(["ëŒ€ì¥", "ì¡±ì¥", "ìš°ë‘ë¨¸ë¦¬", "ë¦¬ë”", "ì™•", "ë³´ìŠ¤"])
            full_name = f"{chief_prefix}-{element}-{chief_suffix}"
            role = "ë¶€ì¡± ì¡±ì¥"
            
        else:  # funny
            # ì¬ë¯¸ìˆëŠ” ìŠ¤íƒ€ì¼: ì˜ì„±ì–´/ì˜íƒœì–´ ì¡°í•©
            element1 = random.choice(name_elements)
            element2 = random.choice(name_elements)
            funny_words = ["êº„ë¥´ë¥´", "ìš°ê±±ìš°ê±±", "ì¿µë•ì¿µë•", "ì‚ë½€ì‚ë½€", "ì™ˆì™ˆ", "ë©ë©", "ê½¥ê½¥"]
            funny_element = random.choice(funny_words)
            if element1 != element2:
                full_name = f"{element1}-{funny_element}-{element2}"
            else:
                full_name = f"{element1}-{funny_element}-ì›ƒìŒë³´"
            role = "ë¶€ì¡± ê°œê·¸ë§¨"
        
        # ì—­í• ì´ ì •í•´ì§€ì§€ ì•Šì€ ê²½ìš° ëœë¤ ì—­í•  ë¶€ì—¬
        if 'role' not in locals() or not role:
            role = random.choice(PRIMITIVE_ROLES)
        
        # ì´ë¦„ ì˜ë¯¸ ìƒì„±
        meaning_parts = []
        for keyword in keywords:
            if keyword.lower() in KEYWORD_ELEMENTS:
                if keyword.lower() == "fire":
                    meaning_parts.append("ë¶ˆì˜ í˜ì„ ê°€ì§„")
                elif keyword.lower() == "strong":
                    meaning_parts.append("ë¬´ì‹œë¬´ì‹œí•œ í˜ì˜")
                elif keyword.lower() == "mammoth":
                    meaning_parts.append("ë§˜ëª¨ìŠ¤ë¥¼ ì‚¬ëƒ¥í•˜ëŠ”")
                elif keyword.lower() == "happy":
                    meaning_parts.append("í•­ìƒ ì›ƒìŒì´ ë„˜ì¹˜ëŠ”")
                else:
                    meaning_parts.append(f"{keyword}ì˜ ê¸°ìš´ì„ ê°€ì§„")
        
        if not meaning_parts:
            meaning_parts.append("ì›ì‹œì‹œëŒ€ì˜ ìš©ê°í•œ")
            
        meaning = f"{', '.join(meaning_parts)} {style} ìŠ¤íƒ€ì¼ì˜ ì›ì‹œì¸"
        
        generated_names.append({
            "name": full_name,
            "meaning": meaning,
            "tribe": tribe,
            "role": role,
            "era": "êµ¬ì„ê¸° ì‹œëŒ€",
            "sound": "ìš°ê°€ìš°ê°€! ê·¸ë¥´ë¦‰!"
        })
    
    return {
        "names": generated_names,
        "keywords_used": keywords,
        "style": style,
        "total_count": count,
        "tribal_greeting": "ìš°ê°€ìš°ê°€! (ì•ˆë…•í•˜ì„¸ìš”!)",
        "time_period": "ì•½ 4ë§Œë…„ ì „ êµ¬ì„ê¸° ì‹œëŒ€"
    }

@mcp.tool  
def get_primitive_name_meaning(name: str) -> dict:
    """
    ì›ì‹œì¸ ì´ë¦„ì˜ ì˜ë¯¸ë¥¼ í•´ì„í•©ë‹ˆë‹¤.
    
    Args:
        name: í•´ì„í•  ì›ì‹œì¸ ì´ë¦„
        
    Returns:
        dict: ì´ë¦„ì˜ ì˜ë¯¸ í•´ì„ê³¼ ì„¤ëª…
    """
    # ì›ì‹œì¸ ì´ë¦„ ìš”ì†Œë³„ ì˜ë¯¸ ì‚¬ì „
    primitive_meanings = {
        # ê¸°ë³¸ ì˜ì„±ì–´/ì˜íƒœì–´
        "ìš°ê°€": "ê¸°ë³¸ì ì¸ ì¸ì‚¬, ì•ˆë…•ì˜ ì˜ë¯¸",
        "ê·¸ë¥´": "ìœ¼ë¥´ë¦‰, ê°•í•œ í˜ì„ ë‚˜íƒ€ë‚´ëŠ” ì†Œë¦¬",
        "ë­‰ê°€": "ë­‰ê²Œë­‰ê²Œ, ë¶€ë“œëŸ½ê³  í¬ê·¼í•œ ëŠë‚Œ",
        "ì¿µì¾…": "ë¬´ê±°ìš´ ë°œê±¸ìŒ, í˜ì„¼ ëª¨ìŠµ",
        "ìœ¼ì•…": "ë†€ë¼ê±°ë‚˜ í™”ê°€ ë‚  ë•Œ ë‚´ëŠ” ì†Œë¦¬",
        "ì™€ìš°": "ë†€ë¼ì›€ê³¼ ê¸°ì¨ì˜ í‘œí˜„",
        
        # ë¶ˆ ê´€ë ¨
        "ë¶ˆê½ƒ": "íƒ€ì˜¤ë¥´ëŠ” ë¶ˆ, ì—´ì •ì ì¸ ì„±ê²©",
        "íƒ€ì˜¤": "í™œí™œ íƒ€ì˜¤ë¥´ëŠ” ë¶ˆê¸¸",
        "í™œí™œ": "ë¶ˆì´ ì˜ íƒ€ëŠ” ëª¨ìŠµ",
        "ì§€ì§€ì§": "ë¶ˆì´ íƒˆ ë•Œ ë‚˜ëŠ” ì†Œë¦¬",
        
        # í˜/ì „íˆ¬ ê´€ë ¨
        "ì‚¬ëƒ¥": "ë¨¹ì´ë¥¼ ì¡ëŠ” ëŠ¥ë ¥",
        "ì°½ì§ˆ": "ì°½ì„ ì˜ ë‹¤ë£¨ëŠ” ì‹¤ë ¥",
        "ëŒë©": "ëŒì„ ë˜ì§€ëŠ” ê¸°ìˆ ",
        "ëŒì£¼ë¨¹": "ëŒì²˜ëŸ¼ ë‹¨ë‹¨í•œ ì£¼ë¨¹",
        
        # ë™ë¬¼ ê´€ë ¨
        "ë§˜ëª¨ìŠ¤": "ê±°ëŒ€í•œ í„¸ì½”ë¼ë¦¬, í° ì¡´ì¬",
        "ê³°ëŒ": "ê³°ì²˜ëŸ¼ ê°•í•˜ê³  í„¸ì´ ë§ì€",
        "í˜¸ë‘": "í˜¸ë‘ì´ì²˜ëŸ¼ ìš©ë§¹í•œ",
        
        # ìì—° ê´€ë ¨
        "ë™êµ´": "ì•ˆì „í•œ ê±°ì²˜, ë³´ê¸ˆìë¦¬",
        "ë°”ìœ„": "ë‹¨ë‹¨í•˜ê³  ë¯¿ìŒì§í•œ ì„±ê²©",
        "ë‚˜ë¬´": "ì­‰ì­‰ ìë¼ëŠ” ì„±ì¥ë ¥",
        "ë¬¼": "ìƒëª…ì˜ ê·¼ì›, ê¹¨ë—í•¨",
        
        # ì—­í•  ê´€ë ¨
        "ì¡±ì¥": "ë¶€ì¡±ì„ ì´ë„ëŠ” ë¦¬ë”",
        "ì‚¬ëƒ¥ê¾¼": "ë¨¹ì´ë¥¼ êµ¬í•´ì˜¤ëŠ” ì‚¬ëŒ",
        "ì£¼ìˆ ì‚¬": "ì˜ì ì¸ ëŠ¥ë ¥ì„ ê°€ì§„ ì‚¬ëŒ",
        "ì „ì‚¬": "ì‹¸ì›€ì„ ë‹´ë‹¹í•˜ëŠ” ìš©ì‚¬"
    }
    
    # ì´ë¦„ ë¶„ì„ (í•˜ì´í”ˆìœ¼ë¡œ ë¶„ë¦¬)
    name_parts = name.split("-")
    interpretations = []
    
    for part in name_parts:
        if part in primitive_meanings:
            interpretations.append(f"{part}: {primitive_meanings[part]}")
        else:
            # íŒ¨í„´ ë§¤ì¹­ìœ¼ë¡œ ì˜ë¯¸ ì¶”ì¸¡
            if "ì´" in part or "ìˆœ" in part or "ê°‘" in part:
                interpretations.append(f"{part}: ì¹œê·¼í•˜ê³  ì •ê°ê°€ëŠ” ì´ë¦„")
            elif "ëŒ€ì¥" in part or "ì¡±ì¥" in part:
                interpretations.append(f"{part}: ë¦¬ë”ì‹­ì„ ë‚˜íƒ€ë‚´ëŠ” í˜¸ì¹­")
            elif "ì¡ì´" in part or "ê¾¼" in part:
                interpretations.append(f"{part}: ì „ë¬¸ ê¸°ìˆ ìë¥¼ ì˜ë¯¸")
            else:
                interpretations.append(f"{part}: ì›ì‹œì‹œëŒ€ íŠ¹ìœ ì˜ í‘œí˜„")
    
    # ì „ì²´ ì˜ë¯¸ í•´ì„
    if interpretations:
        overall_meaning = f"'{name}'ì€(ëŠ”) " + ", ".join([interp.split(': ')[1] for interp in interpretations]) + "ë¥¼ ì˜ë¯¸í•˜ëŠ” êµ¬ì„ê¸° ì‹œëŒ€ ì›ì‹œì¸ì˜ ì´ë¦„ì…ë‹ˆë‹¤."
    else:
        overall_meaning = f"'{name}'ì€(ëŠ”) ì›ì‹œì‹œëŒ€ ë¶€ì¡± ì‚¬íšŒì˜ ë…íŠ¹í•œ ë¬¸í™”ë¥¼ ë°˜ì˜í•œ ì´ë¦„ì…ë‹ˆë‹¤."
    
    return {
        "name": name,
        "parts_analysis": interpretations,
        "overall_meaning": overall_meaning,
        "time_period": "êµ¬ì„ê¸° ì‹œëŒ€ (ì•½ 4ë§Œë…„ ì „)",
        "cultural_note": "ì›ì‹œì¸ë“¤ì€ ìì—°í˜„ìƒ, ë™ë¬¼, ë„êµ¬ ë“±ì—ì„œ ì´ë¦„ì„ ë”°ì™”ìœ¼ë©°, ì˜ì„±ì–´ì™€ ì˜íƒœì–´ë¥¼ ë§ì´ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.",
        "tribal_greeting": "ìš°ê°€ìš°ê°€! (ì´ ì‹œëŒ€ì˜ ì¸ì‚¬ë²•)"
    }

@mcp.tool
def suggest_primitive_keywords() -> dict:
    """
    ì›ì‹œì¸ ì´ë¦„ ìƒì„±ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í‚¤ì›Œë“œë“¤ì„ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì œì•ˆí•©ë‹ˆë‹¤.
    
    Returns:
        dict: ì¹´í…Œê³ ë¦¬ë³„ í‚¤ì›Œë“œ ëª©ë¡
    """
    return {
        "categories": {
            "ë¶ˆ/ì—´": ["fire", "hot"],
            "ì‚¬ëƒ¥/ì „íˆ¬": ["hunt", "strong", "brave"],
            "ë™ë¬¼": ["mammoth", "bear", "tiger", "eagle"],
            "ìì—°": ["cave", "rock", "tree", "water", "wind"],
            "ìŒì‹": ["fruit", "meat", "fish"],
            "ë„êµ¬": ["stone", "stick", "club"],
            "ê°ì •": ["happy", "angry", "funny", "sleepy"],
            "ë‚ ì”¨": ["rain", "sun", "cold", "snow"],
            "ìƒ‰ê¹”": ["red", "blue", "green", "yellow", "black", "white"]
        },
        "styles": ["caveman", "shaman", "hunter", "chief", "funny"],
        "tribes": ["ìš°ê°€ì¡±", "ê·¸ë¥´ì¡±", "ë­‰ê°€ì¡±", "ëŒë¡ì¡±", "ë¶ˆê½ƒì¡±", "ë§˜ëª¨ìŠ¤ì¡±"],
        "usage_tip": "ì˜ì„±ì–´ì™€ ì˜íƒœì–´ë¥¼ í™œìš©í•œ ì¬ë¯¸ìˆëŠ” ì¡°í•©ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!",
        "time_travel_note": "êµ¬ì„ê¸° ì‹œëŒ€ë¡œ ë– ë‚˜ëŠ” ìƒìƒì˜ ì—¬í–‰ì„ ì¦ê²¨ë³´ì„¸ìš”! ìš°ê°€ìš°ê°€!",
        "fun_fact": "ì›ì‹œì¸ë“¤ì€ ì‹¤ì œë¡œ í˜„ì¬ ì¸ë¥˜ì™€ ë˜‘ê°™ì´ ë˜‘ë˜‘í–ˆì§€ë§Œ, ë„êµ¬ì™€ ì–¸ì–´ê°€ ë‹¨ìˆœí–ˆì„ ë¿ì…ë‹ˆë‹¤!"
    }

@mcp.tool
def create_primitive_tribe_story(tribe_name: str, member_names: List[str]) -> dict:
    """
    ì›ì‹œì¸ ë¶€ì¡±ê³¼ êµ¬ì„±ì›ë“¤ë¡œ ì¬ë¯¸ìˆëŠ” ë¶€ì¡± ì´ì•¼ê¸°ë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.
    
    Args:
        tribe_name: ë¶€ì¡± ì´ë¦„
        member_names: ë¶€ì¡± êµ¬ì„±ì› ì´ë¦„ë“¤
        
    Returns:
        dict: ë¶€ì¡± ì´ì•¼ê¸°ì™€ ì„¤ì •
    """
    
    # ë¶€ì¡± íŠ¹ì„± ëœë¤ ì„ íƒ
    tribe_traits = [
        "ë¶ˆì„ ê°€ì¥ ì˜ ë‹¤ë£¨ëŠ”", "ë§˜ëª¨ìŠ¤ ì‚¬ëƒ¥ì˜ ì „ì„¤ì ì¸", "ë™êµ´ ê·¸ë¦¼ì´ ìœ ëª…í•œ",
        "ì—´ë§¤ ì±„ì§‘ì´ ë›°ì–´ë‚œ", "ëŒ ë„êµ¬ ì œì‘ì˜ ë‹¬ì¸", "ì¶¤ê³¼ ë…¸ë˜ê°€ íŠ¹ê¸°ì¸"
    ]
    
    tribe_locations = [
        "í°ë°”ìœ„ ë™êµ´", "ë§‘ì€ì‹œëƒ‡ë¬¼ ê·¼ì²˜", "ë†’ì€ë‚˜ë¬´ ìˆ²ì†", 
        "ë”°ëœ»í•œë‚¨ìª½ ì–¸ë•", "ê±°ëŒ€ë™êµ´ ê¹Šìˆ™ì´", "ë§˜ëª¨ìŠ¤ê¸¸ ì˜†"
    ]
    
    daily_activities = [
        "í•´ ëœ° ë•Œ ë‹¤í•¨ê»˜ ìš°ê°€ìš°ê°€ ì¸ì‚¬í•˜ê¸°",
        "í° ë¶ˆ í”¼ìš°ê³  ë‘¥ê¸€ê²Œ ë‘˜ëŸ¬ì•‰ê¸°", 
        "ë§˜ëª¨ìŠ¤ ì‚¬ëƒ¥ ì‘ì „ íšŒì˜í•˜ê¸°",
        "ë™êµ´ë²½ì— ê·¸ë¦¼ ê·¸ë¦¬ë©° ì´ì•¼ê¸°í•˜ê¸°",
        "ì—´ë§¤ì™€ ê²¬ê³¼ë¥˜ ëª¨ìœ¼ëŸ¬ ë‚˜ê°€ê¸°",
        "ë‹¬ë¹› ì•„ë˜ ë¶€ì¡± ì¶¤ ì¶”ê¸°"
    ]
    
    selected_trait = random.choice(tribe_traits)
    selected_location = random.choice(tribe_locations)
    selected_activities = random.sample(daily_activities, 3)
    
    # êµ¬ì„±ì›ë³„ ì—­í•  ë¶€ì—¬
    member_roles = {}
    available_roles = ["ì¡±ì¥", "ì‚¬ëƒ¥ëŒ€ì¥", "ì£¼ìˆ ì‚¬", "ë„êµ¬ì œì‘ì", "ì—´ë§¤ì±„ì§‘ì¥", "ë¶ˆì§€ê¸°", "ë™êµ´ì§€í‚´ì´"]
    
    for i, member in enumerate(member_names[:len(available_roles)]):
        member_roles[member] = available_roles[i]
    
    # ë‚¨ì€ êµ¬ì„±ì›ë“¤ì€ ì¼ë°˜ ë¶€ì¡±ì›
    for member in member_names[len(available_roles):]:
        member_roles[member] = "ë¶€ì¡±ì›"
    
    story = f"""
ğŸ¦• {tribe_name} ì´ì•¼ê¸° ğŸ¦•

ì˜›ë‚  ì˜›ì , ì•½ 4ë§Œë…„ ì „ êµ¬ì„ê¸° ì‹œëŒ€...
{selected_location}ì— {selected_trait} {tribe_name}ì´ ì‚´ê³  ìˆì—ˆìŠµë‹ˆë‹¤.

ğŸ‘¥ ë¶€ì¡± êµ¬ì„±ì›:
{chr(10).join([f"â€¢ {name} ({role})" for name, role in member_roles.items()])}

ğŸŒ… ë¶€ì¡±ì˜ í•˜ë£¨:
{chr(10).join([f"â€¢ {activity}" for activity in selected_activities])}

ìš°ê°€ìš°ê°€! ì´ë“¤ì˜ ëª¨í—˜ì€ ê³„ì†ë©ë‹ˆë‹¤...
    """
    
    return {
        "tribe_name": tribe_name,
        "story": story.strip(),
        "members": member_roles,
        "location": selected_location,
        "specialty": selected_trait,
        "daily_activities": selected_activities,
        "tribal_motto": "ìš°ê°€ìš°ê°€! í•¨ê»˜í•˜ë©´ ë§˜ëª¨ìŠ¤ë„ ë¬´ì„­ì§€ ì•Šë‹¤!",
        "time_period": "êµ¬ì„ê¸° ì‹œëŒ€ (ì•½ 4ë§Œë…„ ì „)"
    }

if __name__ == "__main__":
    mcp.run()
